# üì¶ Gu√≠a de Instalaci√≥n: PostgreSQL 17 + Zabbix 7.4 en Ubuntu 24.04

Este documento describe paso a paso c√≥mo instalar **PostgreSQL 17** y **Zabbix 7.4** sobre **Ubuntu Server 24.04 LTS**.  
Incluye actualizaci√≥n del sistema, instalaci√≥n de paquetes, configuraci√≥n de base de datos y despliegue del frontend web.  

---

## üîß 1. Actualizaci√≥n del Sistema
```bash
apt update -y              # Actualiza los repositorios
apt dist-upgrade -y        # Actualiza la distribuci√≥n
```

---

## üêò 2. Instalaci√≥n de PostgreSQL 17
```bash
# A√±adir el repositorio oficial de PostgreSQL
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'

# Importar la llave GPG
curl -fsSL https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/postgresql.gpg

# Actualizar repositorios
apt update -y

# Instalar PostgreSQL 17
sudo apt install postgresql-17 -y

# Iniciar y habilitar el servicio
sudo systemctl start postgresql
sudo systemctl enable postgresql

# Verificar versi√≥n instalada
psql --version
```

---

## üìä 3. Instalaci√≥n de Zabbix 7.4
```bash
# Descargar paquete del repositorio Zabbix
wget https://repo.zabbix.com/zabbix/7.4/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.4+ubuntu24.04_all.deb

# Instalar repositorio
dpkg -i zabbix-release_latest_7.4+ubuntu24.04_all.deb

# Actualizar repositorios
apt update

# Instalar Zabbix con PostgreSQL y frontend
apt install zabbix-server-pgsql zabbix-frontend-php php8.3-pgsql zabbix-apache-conf zabbix-sql-scripts zabbix-agent2 -y

# Instalar plugins adicionales del agente v2
apt install zabbix-agent2-plugin-mongodb zabbix-agent2-plugin-mssql zabbix-agent2-plugin-postgresql -y
```

---

## üóÑÔ∏è 4. Configuraci√≥n de la Base de Datos
```bash
# Crear usuario Zabbix en PostgreSQL (pedir√° contrase√±a, NO OLVIDARLA)
sudo -u postgres createuser --pwprompt zabbix

# Crear base de datos asignada al usuario
sudo -u postgres createdb -O zabbix zabbix

# Importar esquema inicial de Zabbix
zcat /usr/share/zabbix/sql-scripts/postgresql/server.sql.gz | sudo -u zabbix psql zabbix
```

---

## ‚öôÔ∏è 5. Configuraci√≥n del Servidor Zabbix
```bash
# Editar configuraci√≥n de Zabbix y a√±adir la contrase√±a del usuario creado
sudo sed -i 's/^#\s*DBPassword=.*/DBPassword=MICONTRASE√ëA/' /etc/zabbix/zabbix_server.conf

# Reiniciar servicios
systemctl restart zabbix-server zabbix-agent2 apache2

# Habilitar inicio autom√°tico con el sistema
systemctl enable zabbix-server zabbix-agent2 apache2
```

---

## üåê 6. Acceso a la Interfaz Web
Abrir en el navegador:  
```
http://host/zabbix
```

---

## üñ•Ô∏è 7. Configuraci√≥n de Apache (opcional)
```bash
cd /var/www/html/      # Entrar en directorio web
rm index.html          # Eliminar index por defecto
touch index.html       # Crear un archivo vac√≠o
```

---


